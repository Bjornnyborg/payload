{"version":3,"file":"index.js","names":["React","LivePreviewClient","LivePreviewView","props","doc","initPageResult","collectionConfig","globalConfig","locale","req","livePreviewConfig","payload","config","admin","livePreview","breakpoints","name","height","label","width","url","data","_jsx","Description","initialData","PreviewButton","PublishButton","SaveButton","SaveDraftButton","Upload"],"sources":["../../../src/views/LivePreview/index.tsx"],"sourcesContent":["import type { DocumentViewServerProps, LivePreviewConfig } from 'payload'\n\nimport React from 'react'\n\nimport './index.scss'\nimport { LivePreviewClient } from './index.client.js'\n\nexport async function LivePreviewView(props: DocumentViewServerProps) {\n  const { doc, initPageResult } = props\n\n  const { collectionConfig, globalConfig, locale, req } = initPageResult\n\n  let livePreviewConfig: LivePreviewConfig = req.payload.config?.admin?.livePreview\n\n  if (collectionConfig) {\n    livePreviewConfig = {\n      ...(livePreviewConfig || {}),\n      ...(collectionConfig.admin.livePreview || {}),\n    }\n  }\n\n  if (globalConfig) {\n    livePreviewConfig = {\n      ...(livePreviewConfig || {}),\n      ...(globalConfig.admin.livePreview || {}),\n    }\n  }\n\n  const breakpoints: LivePreviewConfig['breakpoints'] = [\n    ...(livePreviewConfig?.breakpoints || []),\n    {\n      name: 'responsive',\n      height: '100%',\n      label: 'Responsive',\n      width: '100%',\n    },\n  ]\n\n  const url =\n    typeof livePreviewConfig?.url === 'function'\n      ? await livePreviewConfig.url({\n          collectionConfig,\n          data: doc,\n          globalConfig,\n          locale,\n          req,\n          /**\n           * @deprecated\n           * Use `req.payload` instead. This will be removed in the next major version.\n           */\n          payload: initPageResult.req.payload,\n        })\n      : livePreviewConfig?.url\n\n  return (\n    <LivePreviewClient\n      breakpoints={breakpoints}\n      Description={props.Description}\n      initialData={doc}\n      PreviewButton={props.PreviewButton}\n      PublishButton={props.PublishButton}\n      SaveButton={props.SaveButton}\n      SaveDraftButton={props.SaveDraftButton}\n      Upload={props.Upload}\n      url={url}\n    />\n  )\n}\n"],"mappings":";AAEA,OAAOA,KAAA,MAAW;AAGlB,SAASC,iBAAiB,QAAQ;AAElC,OAAO,eAAeC,gBAAgBC,KAA8B;EAClE,MAAM;IAAEC,GAAG;IAAEC;EAAc,CAAE,GAAGF,KAAA;EAEhC,MAAM;IAAEG,gBAAgB;IAAEC,YAAY;IAAEC,MAAM;IAAEC;EAAG,CAAE,GAAGJ,cAAA;EAExD,IAAIK,iBAAA,GAAuCD,GAAA,CAAIE,OAAO,CAACC,MAAM,EAAEC,KAAA,EAAOC,WAAA;EAEtE,IAAIR,gBAAA,EAAkB;IACpBI,iBAAA,GAAoB;MAClB,IAAIA,iBAAA,IAAqB,CAAC,CAAC;MAC3B,IAAIJ,gBAAA,CAAiBO,KAAK,CAACC,WAAW,IAAI,CAAC,CAAC;IAC9C;EACF;EAEA,IAAIP,YAAA,EAAc;IAChBG,iBAAA,GAAoB;MAClB,IAAIA,iBAAA,IAAqB,CAAC,CAAC;MAC3B,IAAIH,YAAA,CAAaM,KAAK,CAACC,WAAW,IAAI,CAAC,CAAC;IAC1C;EACF;EAEA,MAAMC,WAAA,GAAgD,C,IAChDL,iBAAA,EAAmBK,WAAA,IAAe,EAAE,GACxC;IACEC,IAAA,EAAM;IACNC,MAAA,EAAQ;IACRC,KAAA,EAAO;IACPC,KAAA,EAAO;EACT,EACD;EAED,MAAMC,GAAA,GACJ,OAAOV,iBAAA,EAAmBU,GAAA,KAAQ,aAC9B,MAAMV,iBAAA,CAAkBU,GAAG,CAAC;IAC1Bd,gBAAA;IACAe,IAAA,EAAMjB,GAAA;IACNG,YAAA;IACAC,MAAA;IACAC,GAAA;IACA;;;;IAIAE,OAAA,EAASN,cAAA,CAAeI,GAAG,CAACE;EAC9B,KACAD,iBAAA,EAAmBU,GAAA;EAEzB,oBACEE,IAAA,CAACrB,iBAAA;IACCc,WAAA,EAAaA,WAAA;IACbQ,WAAA,EAAapB,KAAA,CAAMoB,WAAW;IAC9BC,WAAA,EAAapB,GAAA;IACbqB,aAAA,EAAetB,KAAA,CAAMsB,aAAa;IAClCC,aAAA,EAAevB,KAAA,CAAMuB,aAAa;IAClCC,UAAA,EAAYxB,KAAA,CAAMwB,UAAU;IAC5BC,eAAA,EAAiBzB,KAAA,CAAMyB,eAAe;IACtCC,MAAA,EAAQ1B,KAAA,CAAM0B,MAAM;IACpBT,GAAA,EAAKA;;AAGX","ignoreList":[]}