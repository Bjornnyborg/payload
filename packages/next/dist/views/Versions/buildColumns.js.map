{"version":3,"file":"buildColumns.js","names":["SortColumn","React","AutosaveCell","CreatedAtCell","IDCell","buildVersionColumns","collectionConfig","docID","docs","globalConfig","i18n","t","latestDraftVersion","latestPublishedVersion","entityConfig","columns","accessor","active","field","name","type","Heading","_jsx","Label","renderedCells","map","doc","i","collectionSlug","slug","globalSlug","rowData","id","updatedAt","disable","versions","drafts","autosave","push"],"sources":["../../../src/views/Versions/buildColumns.tsx"],"sourcesContent":["import type { I18n } from '@payloadcms/translations'\nimport type {\n  Column,\n  PaginatedDocs,\n  SanitizedCollectionConfig,\n  SanitizedConfig,\n  SanitizedGlobalConfig,\n  TypeWithVersion,\n} from 'payload'\n\nimport { SortColumn } from '@payloadcms/ui'\nimport React from 'react'\n\nimport { AutosaveCell } from './cells/AutosaveCell/index.js'\nimport { CreatedAtCell } from './cells/CreatedAt/index.js'\nimport { IDCell } from './cells/ID/index.js'\n\nexport const buildVersionColumns = ({\n  collectionConfig,\n  docID,\n  docs,\n  globalConfig,\n  i18n: { t },\n  latestDraftVersion,\n  latestPublishedVersion,\n}: {\n  collectionConfig?: SanitizedCollectionConfig\n  config: SanitizedConfig\n  docID?: number | string\n  docs: PaginatedDocs<TypeWithVersion<any>>['docs']\n  globalConfig?: SanitizedGlobalConfig\n  i18n: I18n\n  latestDraftVersion?: string\n  latestPublishedVersion?: string\n}): Column[] => {\n  const entityConfig = collectionConfig || globalConfig\n\n  const columns: Column[] = [\n    {\n      accessor: 'updatedAt',\n      active: true,\n      field: {\n        name: '',\n        type: 'date',\n      },\n      Heading: <SortColumn Label={t('general:updatedAt')} name=\"updatedAt\" />,\n      renderedCells: docs.map((doc, i) => {\n        return (\n          <CreatedAtCell\n            collectionSlug={collectionConfig?.slug}\n            docID={docID}\n            globalSlug={globalConfig?.slug}\n            key={i}\n            rowData={{\n              id: doc.id,\n              updatedAt: doc.updatedAt,\n            }}\n          />\n        )\n      }),\n    },\n    {\n      accessor: 'id',\n      active: true,\n      field: {\n        name: '',\n        type: 'text',\n      },\n      Heading: <SortColumn disable Label={t('version:versionID')} name=\"id\" />,\n      renderedCells: docs.map((doc, i) => {\n        return <IDCell id={doc.id} key={i} />\n      }),\n    },\n  ]\n\n  if (\n    entityConfig?.versions?.drafts ||\n    (entityConfig?.versions?.drafts && entityConfig.versions.drafts?.autosave)\n  ) {\n    columns.push({\n      accessor: '_status',\n      active: true,\n      field: {\n        name: '',\n        type: 'checkbox',\n      },\n      Heading: <SortColumn disable Label={t('version:status')} name=\"status\" />,\n      renderedCells: docs.map((doc, i) => {\n        return (\n          <AutosaveCell\n            key={i}\n            latestDraftVersion={latestDraftVersion}\n            latestPublishedVersion={latestPublishedVersion}\n            rowData={doc}\n          />\n        )\n      }),\n    })\n  }\n\n  return columns\n}\n"],"mappings":";AAUA,SAASA,UAAU,QAAQ;AAC3B,OAAOC,KAAA,MAAW;AAElB,SAASC,YAAY,QAAQ;AAC7B,SAASC,aAAa,QAAQ;AAC9B,SAASC,MAAM,QAAQ;AAEvB,OAAO,MAAMC,mBAAA,GAAsBA,CAAC;EAClCC,gBAAgB;EAChBC,KAAK;EACLC,IAAI;EACJC,YAAY;EACZC,IAAA,EAAM;IAAEC;EAAC,CAAE;EACXC,kBAAkB;EAClBC;AAAsB,CAUvB;EACC,MAAMC,YAAA,GAAeR,gBAAA,IAAoBG,YAAA;EAEzC,MAAMM,OAAA,GAAoB,CACxB;IACEC,QAAA,EAAU;IACVC,MAAA,EAAQ;IACRC,KAAA,EAAO;MACLC,IAAA,EAAM;MACNC,IAAA,EAAM;IACR;IACAC,OAAA,eAASC,IAAA,CAACtB,UAAA;MAAWuB,KAAA,EAAOZ,CAAA,CAAE;MAAsBQ,IAAA,EAAK;;IACzDK,aAAA,EAAehB,IAAA,CAAKiB,GAAG,CAAC,CAACC,GAAA,EAAKC,CAAA;MAC5B,oBACEL,IAAA,CAACnB,aAAA;QACCyB,cAAA,EAAgBtB,gBAAA,EAAkBuB,IAAA;QAClCtB,KAAA,EAAOA,KAAA;QACPuB,UAAA,EAAYrB,YAAA,EAAcoB,IAAA;QAE1BE,OAAA,EAAS;UACPC,EAAA,EAAIN,GAAA,CAAIM,EAAE;UACVC,SAAA,EAAWP,GAAA,CAAIO;QACjB;SAJKN,CAAA;IAOX;EACF,GACA;IACEX,QAAA,EAAU;IACVC,MAAA,EAAQ;IACRC,KAAA,EAAO;MACLC,IAAA,EAAM;MACNC,IAAA,EAAM;IACR;IACAC,OAAA,eAASC,IAAA,CAACtB,UAAA;MAAWkC,OAAO;MAACX,KAAA,EAAOZ,CAAA,CAAE;MAAsBQ,IAAA,EAAK;;IACjEK,aAAA,EAAehB,IAAA,CAAKiB,GAAG,CAAC,CAACC,GAAA,EAAKC,CAAA;MAC5B,oBAAOL,IAAA,CAAClB,MAAA;QAAO4B,EAAA,EAAIN,GAAA,CAAIM;SAASL,CAAA;IAClC;EACF,EACD;EAED,IACEb,YAAA,EAAcqB,QAAA,EAAUC,MAAA,IACvBtB,YAAA,EAAcqB,QAAA,EAAUC,MAAA,IAAUtB,YAAA,CAAaqB,QAAQ,CAACC,MAAM,EAAEC,QAAA,EACjE;IACAtB,OAAA,CAAQuB,IAAI,CAAC;MACXtB,QAAA,EAAU;MACVC,MAAA,EAAQ;MACRC,KAAA,EAAO;QACLC,IAAA,EAAM;QACNC,IAAA,EAAM;MACR;MACAC,OAAA,eAASC,IAAA,CAACtB,UAAA;QAAWkC,OAAO;QAACX,KAAA,EAAOZ,CAAA,CAAE;QAAmBQ,IAAA,EAAK;;MAC9DK,aAAA,EAAehB,IAAA,CAAKiB,GAAG,CAAC,CAACC,GAAA,EAAKC,CAAA;QAC5B,oBACEL,IAAA,CAACpB,YAAA;UAECU,kBAAA,EAAoBA,kBAAA;UACpBC,sBAAA,EAAwBA,sBAAA;UACxBkB,OAAA,EAASL;WAHJC,CAAA;MAMX;IACF;EACF;EAEA,OAAOZ,OAAA;AACT","ignoreList":[]}