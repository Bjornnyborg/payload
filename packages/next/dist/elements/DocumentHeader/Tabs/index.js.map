{"version":3,"file":"index.js","names":["RenderServerComponent","React","getCustomViews","getViewConfig","ShouldRenderTabs","DocumentTab","tabs","defaultTabs","baseClass","DocumentTabs","props","collectionConfig","globalConfig","i18n","payload","permissions","config","customViews","_jsx","className","_jsxs","Object","entries","sort","a","b","order","undefined","map","name","tab","index","viewConfig","tabFromConfig","condition","meetsCondition","Boolean","path","CustomView","Component","clientProps","importMap","key","serverProps"],"sources":["../../../../src/elements/DocumentHeader/Tabs/index.tsx"],"sourcesContent":["import type { I18n } from '@payloadcms/translations'\nimport type {\n  DocumentTabClientProps,\n  DocumentTabServerPropsOnly,\n  Payload,\n  SanitizedCollectionConfig,\n  SanitizedGlobalConfig,\n  SanitizedPermissions,\n} from 'payload'\n\nimport { RenderServerComponent } from '@payloadcms/ui/elements/RenderServerComponent'\nimport React from 'react'\n\nimport { getCustomViews } from './getCustomViews.js'\nimport { getViewConfig } from './getViewConfig.js'\nimport './index.scss'\nimport { ShouldRenderTabs } from './ShouldRenderTabs.js'\nimport { DocumentTab } from './Tab/index.js'\nimport { tabs as defaultTabs } from './tabs/index.js'\n\nconst baseClass = 'doc-tabs'\n\nexport const DocumentTabs: React.FC<{\n  collectionConfig: SanitizedCollectionConfig\n  globalConfig: SanitizedGlobalConfig\n  i18n: I18n\n  payload: Payload\n  permissions: SanitizedPermissions\n}> = (props) => {\n  const { collectionConfig, globalConfig, i18n, payload, permissions } = props\n  const { config } = payload\n\n  const customViews = getCustomViews({ collectionConfig, globalConfig })\n\n  return (\n    <ShouldRenderTabs>\n      <div className={baseClass}>\n        <div className={`${baseClass}__tabs-container`}>\n          <ul className={`${baseClass}__tabs`}>\n            {Object.entries(defaultTabs)\n              // sort `defaultViews` based on `order` property from smallest to largest\n              // if no `order`, append the view to the end\n              // TODO: open `order` to the config and merge `defaultViews` with `customViews`\n              ?.sort(([, a], [, b]) => {\n                if (a.order === undefined && b.order === undefined) {\n                  return 0\n                } else if (a.order === undefined) {\n                  return 1\n                } else if (b.order === undefined) {\n                  return -1\n                }\n                return a.order - b.order\n              })\n              ?.map(([name, tab], index) => {\n                const viewConfig = getViewConfig({ name, collectionConfig, globalConfig })\n                const tabFromConfig = viewConfig && 'tab' in viewConfig ? viewConfig.tab : undefined\n\n                const { condition } = tabFromConfig || {}\n\n                const meetsCondition =\n                  !condition ||\n                  (condition &&\n                    Boolean(condition({ collectionConfig, config, globalConfig, permissions })))\n\n                if (meetsCondition) {\n                  return (\n                    <DocumentTab\n                      key={`tab-${index}`}\n                      path={viewConfig && 'path' in viewConfig ? viewConfig.path : ''}\n                      {...{\n                        ...props,\n                        ...(tab || {}),\n                        ...(tabFromConfig || {}),\n                      }}\n                    />\n                  )\n                }\n\n                return null\n              })}\n            {customViews?.map((CustomView, index) => {\n              if ('tab' in CustomView) {\n                const { path, tab } = CustomView\n\n                if (tab.Component) {\n                  return RenderServerComponent({\n                    clientProps: {\n                      path,\n                    } satisfies DocumentTabClientProps,\n                    Component: tab.Component,\n                    importMap: payload.importMap,\n                    key: `tab-custom-${index}`,\n                    serverProps: {\n                      collectionConfig,\n                      globalConfig,\n                      i18n,\n                      payload,\n                      permissions,\n                    } satisfies DocumentTabServerPropsOnly,\n                  })\n                }\n\n                return (\n                  <DocumentTab\n                    key={`tab-custom-${index}`}\n                    path={path}\n                    {...{\n                      ...props,\n                      ...tab,\n                    }}\n                  />\n                )\n              }\n\n              return null\n            })}\n          </ul>\n        </div>\n      </div>\n    </ShouldRenderTabs>\n  )\n}\n"],"mappings":"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","ignoreList":[]}