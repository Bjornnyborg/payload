{"version":3,"sources":["../../src/client/VercelBlobClientUploadHandler.ts"],"sourcesContent":["'use client'\nimport { createClientUploadHandler } from '@payloadcms/plugin-cloud-storage/client'\nimport { upload } from '@vercel/blob/client'\n\nexport type VercelBlobClientUploadHandlerExtra = {\n  addRandomSuffix: boolean\n  baseURL: string\n  prefix: string\n}\n\nexport const VercelBlobClientUploadHandler =\n  createClientUploadHandler<VercelBlobClientUploadHandlerExtra>({\n    handler: async ({\n      apiRoute,\n      collectionSlug,\n      extra: { addRandomSuffix, baseURL, prefix = '' },\n      file,\n      serverHandlerPath,\n      serverURL,\n      updateFilename,\n    }) => {\n      const result = await upload(`${prefix}${file.name}`, file, {\n        access: 'public',\n        clientPayload: collectionSlug,\n        contentType: file.type,\n        handleUploadUrl: `${serverURL}${apiRoute}${serverHandlerPath}`,\n      })\n\n      // Update filename with suffix from returned url\n      if (addRandomSuffix) {\n        updateFilename(result.url.replace(`${baseURL}/`, ''))\n      }\n    },\n  })\n"],"names":["createClientUploadHandler","upload","VercelBlobClientUploadHandler","handler","apiRoute","collectionSlug","extra","addRandomSuffix","baseURL","prefix","file","serverHandlerPath","serverURL","updateFilename","result","name","access","clientPayload","contentType","type","handleUploadUrl","url","replace"],"mappings":"AAAA;AACA,SAASA,yBAAyB,QAAQ,0CAAyC;AACnF,SAASC,MAAM,QAAQ,sBAAqB;AAQ5C,OAAO,MAAMC,gCACXF,0BAA8D;IAC5DG,SAAS,OAAO,EACdC,QAAQ,EACRC,cAAc,EACdC,OAAO,EAAEC,eAAe,EAAEC,OAAO,EAAEC,SAAS,EAAE,EAAE,EAChDC,IAAI,EACJC,iBAAiB,EACjBC,SAAS,EACTC,cAAc,EACf;QACC,MAAMC,SAAS,MAAMb,OAAO,GAAGQ,SAASC,KAAKK,IAAI,EAAE,EAAEL,MAAM;YACzDM,QAAQ;YACRC,eAAeZ;YACfa,aAAaR,KAAKS,IAAI;YACtBC,iBAAiB,GAAGR,YAAYR,WAAWO,mBAAmB;QAChE;QAEA,gDAAgD;QAChD,IAAIJ,iBAAiB;YACnBM,eAAeC,OAAOO,GAAG,CAACC,OAAO,CAAC,GAAGd,QAAQ,CAAC,CAAC,EAAE;QACnD;IACF;AACF,GAAE"}