{"version":3,"sources":["../../src/client/AzureClientUploadHandler.ts"],"sourcesContent":["'use client'\nimport { createClientUploadHandler } from '@payloadcms/plugin-cloud-storage/client'\n\nexport const AzureClientUploadHandler = createClientUploadHandler({\n  handler: async ({ apiRoute, collectionSlug, file, prefix, serverHandlerPath, serverURL }) => {\n    const response = await fetch(`${serverURL}${apiRoute}${serverHandlerPath}`, {\n      body: JSON.stringify({\n        collectionSlug,\n        filename: file.name,\n        mimeType: file.type,\n      }),\n      credentials: 'include',\n      method: 'POST',\n    })\n\n    const { url } = await response.json()\n\n    await fetch(url, {\n      body: file,\n      headers: {\n        'Content-Length': file.size.toString(),\n        'Content-Type': file.type,\n        // Required for azure\n        'x-ms-blob-type': 'BlockBlob',\n      },\n      method: 'PUT',\n    })\n\n    return { prefix }\n  },\n})\n"],"names":["createClientUploadHandler","AzureClientUploadHandler","handler","apiRoute","collectionSlug","file","prefix","serverHandlerPath","serverURL","response","fetch","body","JSON","stringify","filename","name","mimeType","type","credentials","method","url","json","headers","size","toString"],"mappings":"AAAA;AACA,SAASA,yBAAyB,QAAQ,0CAAyC;AAEnF,OAAO,MAAMC,2BAA2BD,0BAA0B;IAChEE,SAAS,OAAO,EAAEC,QAAQ,EAAEC,cAAc,EAAEC,IAAI,EAAEC,MAAM,EAAEC,iBAAiB,EAAEC,SAAS,EAAE;QACtF,MAAMC,WAAW,MAAMC,MAAM,GAAGF,YAAYL,WAAWI,mBAAmB,EAAE;YAC1EI,MAAMC,KAAKC,SAAS,CAAC;gBACnBT;gBACAU,UAAUT,KAAKU,IAAI;gBACnBC,UAAUX,KAAKY,IAAI;YACrB;YACAC,aAAa;YACbC,QAAQ;QACV;QAEA,MAAM,EAAEC,GAAG,EAAE,GAAG,MAAMX,SAASY,IAAI;QAEnC,MAAMX,MAAMU,KAAK;YACfT,MAAMN;YACNiB,SAAS;gBACP,kBAAkBjB,KAAKkB,IAAI,CAACC,QAAQ;gBACpC,gBAAgBnB,KAAKY,IAAI;gBACzB,qBAAqB;gBACrB,kBAAkB;YACpB;YACAE,QAAQ;QACV;QAEA,OAAO;YAAEb;QAAO;IAClB;AACF,GAAE"}