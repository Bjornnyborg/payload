{"version":3,"sources":["../../../src/field/elements/getCommonBlock.tsx"],"sourcesContent":["import type { NodeEntry, NodeMatch } from 'slate'\n\nimport { Editor, Node } from 'slate'\n\nimport type { ElementNode } from '../../types.js'\n\nimport { isBlockElement } from './isBlockElement.js'\n\nexport const getCommonBlock = (editor: Editor, match?: NodeMatch<Node>): NodeEntry<Node> => {\n  const range = Editor.unhangRange(editor, editor.selection, { voids: true })\n\n  const [common, path] = Node.common(editor, range.anchor.path, range.focus.path)\n\n  if (isBlockElement(editor, common) || Editor.isEditor(common)) {\n    return [common, path]\n  }\n\n  return Editor.above(editor, {\n    at: path,\n    match: match || ((n: ElementNode) => isBlockElement(editor, n) || Editor.isEditor(n)),\n  })\n}\n"],"names":["Editor","Node","isBlockElement","getCommonBlock","editor","match","range","unhangRange","selection","voids","common","path","anchor","focus","isEditor","above","at","n"],"mappings":"AAEA,SAASA,MAAM,EAAEC,IAAI,QAAQ,QAAO;AAIpC,SAASC,cAAc,QAAQ,sBAAqB;AAEpD,OAAO,MAAMC,iBAAiB,CAACC,QAAgBC;IAC7C,MAAMC,QAAQN,OAAOO,WAAW,CAACH,QAAQA,OAAOI,SAAS,EAAE;QAAEC,OAAO;IAAK;IAEzE,MAAM,CAACC,QAAQC,KAAK,GAAGV,KAAKS,MAAM,CAACN,QAAQE,MAAMM,MAAM,CAACD,IAAI,EAAEL,MAAMO,KAAK,CAACF,IAAI;IAE9E,IAAIT,eAAeE,QAAQM,WAAWV,OAAOc,QAAQ,CAACJ,SAAS;QAC7D,OAAO;YAACA;YAAQC;SAAK;IACvB;IAEA,OAAOX,OAAOe,KAAK,CAACX,QAAQ;QAC1BY,IAAIL;QACJN,OAAOA,SAAU,CAAA,CAACY,IAAmBf,eAAeE,QAAQa,MAAMjB,OAAOc,QAAQ,CAACG,EAAC;IACrF;AACF,EAAC"}